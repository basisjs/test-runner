<!doctype html>

<html>

<head>
  <meta charset="utf-8">
  <title>Basis Test Suite</title>

  <style>
    HTML,
    BODY
    {
      background: #F0F0F0;
      padding: 0;
      margin: 0;
      height: 100%;
      font-size: small;
      font-family: Tahoma, serif;
    }
    BODY
    {
      overflow-y: scroll;
    }
  </style>
  <script type="text/javascript" src="lib/basisjs/src/basis.js" data-basis-config="
    autoload: 'src/reporter/app',
    path: {
      core: 'src',
      esprima: 'lib/esprima',
      diff: 'lib/jsdiff'
    },
    extProto: false
  "></script>
</head>

<body>
  <script>
    var path = location.search.replace(/^\?/, '');
    basis.resource('src/reporter/app.js').fetch().ready(function(app){
      var originalJsWrapper = basis.resource.extensions['.js'];
      basis.resource.extensions['.js'] = function(content, url){
        var exports = originalJsWrapper(content, url);
        if (exports)
          exports.filename_ = url;
        return exports;
      };

      basis.resource(path).ready(function(content){
        var t = new Date();
        app.loadTests(content);
        console.log(new Date - t);
      }).fetch();
    });
  </script>
</body>
</html>