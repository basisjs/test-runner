<!doctype html>

<html>

<head>
  <meta charset="utf-8">
  <title>Basis Test Suite</title>

  <style>
    HTML,
    BODY
    {
      background: #F0F0F0;
      padding: 0;
      margin: 0;
      height: 100%;
    }
    BODY
    {
      overflow-y: scroll;
    }

    .hide-frame
    {
      position: absolute;
      top: -100px;
      left: -100px;
      height: 10px;
      width: 10px;
    }
  </style>

  <script>var sss = new Date;</script>
  <script src="../bower_components/basisjs/src/basis.js" data-basis-config="
    autoload: 'reporter/app',
    path: {
      core: '.',
      esprima: '../bower_components/esprima',
      diff: '../bower_components/jsdiff'
    },
    extProto: false
  "></script>
</head>

<body>
  <script>
    (function(){
      var app = basis.require('reporter/app.js');
      var params = location.search.replace(/^\?/, '').split('&').reduce(function(res, pair){
        var parts = pair.split('=');
        res[parts.shift()] = parts.join('=');
        return res;
      }, {});

      var iframe = document.createElement('iframe');
      iframe.src = params.page;
      iframe.className = 'hide-frame';
      iframe.onload = function(){
        if (typeof this.contentWindow.loadTests == 'function')
        {
          var t = new Date;
          this.contentWindow.loadTests(app.loadTests);
          document.title = (new Date - t) + '/' + (new Date - sss);
        }
      }
      basis.doc.body.add(iframe);
    })();
  </script>
</body>
</html>